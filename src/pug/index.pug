doctype html
html(lang='en')
    head
        meta(charset='utf-8')
        meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
        meta(name='description', content='')
        meta(name='author', content='')

        title Shoesconn IMS Visitor System

        // Favicon
        link(rel='icon', type='image/x-icon', href='assets/img/favicon.ico')

        // Font Awesome icons (free version)
        script(src='https://use.fontawesome.com/releases/v5.15.1/js/all.js', crossorigin='anonymous')

        // Google fonts
        link(href='https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700', rel='stylesheet')
        link(href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic', rel='stylesheet', type='text/css')

        // Third party plugin CSS
        link(href='https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css', rel='stylesheet')

        // Core theme CSS (includes Bootstrap)
        link(href='css/styles.css', rel='stylesheet')

    body#page-top
        // Masthead
        header.masthead
            .container.h-100
                .row.h-100.align-items-center.justify-content-center.text-center.position-relative
                    .visitor-name
                        h2.text-white Dear Donald!
                    .col-lg-10.align-self-end
                        h2.ext-uppercase.text-white.font-weight-bold 感謝您今日的來訪
                        h2.text-uppercase.text-white.font-weight-bold 您與David的會議將於14:00開始
                    .col-lg-10.align-self-end
                    .mqtt-block.text-white
                        #container
                            label 溫度
                                #temp
                            label 濕度
                                #humi
                            label PM 2.5
                                #pm_air
        .today-info.text-white
            p.
               協雲科技 <br />
               歡迎您的蒞臨 <br />
            #block4
                h4(id="today_time")
        // Bootstrap core JS
        script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js')
        script(src='https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js')

        // Third party plugin JS
        script(src='https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js')
        script(src='https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js')

        // Core theme JS
        script(src='https://cdn.socket.io/socket.io-3.0.1.min.js')
        script.
            let socket = io.connect('http://localhost:5000');
            socket.open();
            //console.log('安安' + socket);
            socket.on('mqtt', function (data) {
                let json = JSON.parse(JSON.stringify(data));
                console.log("安安" + json.temperature);
                console.log("安安2" + json.humidity);
                console.log("安安3" + json.pmAir);
                console.log("安安4" + json.date);
                document.getElementById('temp').innerHTML = json.temperature + ' °C';
                document.getElementById('humi').innerHTML = json.humidity + ' %';
                document.getElementById('pm_air').innerHTML = json.pmAir + ' μg/m3';
                document.getElementById('today_time').innerHTML = json.date;
            });

        script(src='js/scripts.js')

